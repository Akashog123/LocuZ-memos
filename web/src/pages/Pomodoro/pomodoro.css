.pomodoro-root { position: relative; color: #fff; overflow: visible; --clock-font-size: 6rem; --timer-font-size: 5rem; }
.pomodoro-root .pomodoro-inner { position:relative; width:100%; height: 100vh; max-width:none; padding:0; overflow:hidden; display:flex; flex-direction:column; }
.pomodoro-header { display:flex; justify-content:space-between; align-items:center; padding:1rem; z-index:3; position:relative; }
.pomodoro-actions button { margin-left:0.5rem; }
.pomodoro-background { position:absolute; inset:0; z-index:0; }
.pomodoro-bg-image, .pomodoro-bg-video { width:100%; height:100%; object-fit:cover; }
.pomodoro-content { position:relative; z-index:3; display:flex; align-items:center; justify-content:center; flex:1 1 auto; flex-direction:column; text-align:center; padding:2.5rem 1.5rem; }
.pomodoro-home .pomodoro-clock { font-size: var(--clock-font-size); font-weight:600; }
.pomodoro-home .pomodoro-date { margin-top:0.5rem; font-size:1.25rem; }
.pomodoro-mode .timer-display { 
  font-size: var(--timer-font-size); 
  background: rgba(0,0,0,0.3);
  padding: 2rem 3.5rem; 
  border-radius: 20px;
  transition: all 0.3s ease;
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}
.pomodoro-mode.running .timer-display {
  animation: timerPulse 2s ease-in-out infinite;
}

.pomodoro-mode.ambient-mode.running .timer-display.ambient {
  animation: ambientGlow 3s ease-in-out infinite alternate, timerPulse 2s ease-in-out infinite;
}
.pomodoro-mode.ambient-mode .timer-display.ambient { 
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.2);
  animation: ambientGlow 3s ease-in-out infinite alternate;
  box-shadow: 0 8px 32px rgba(255, 255, 255, 0.1);
}

.timer-digits {
  display: flex;
  align-items: center;
  justify-content: center;
  font-variant-numeric: tabular-nums;
  font-weight: 600;
}

.timer-digit {
  display: inline-block;
  min-width: 0.6em;
  text-align: center;
  transition: all 0.3s ease;
}

.timer-separator {
  margin: 0 0.2em;
  opacity: 0.7;
}
.timer-controls { 
  margin-top: 2rem; 
  display: flex; 
  gap: 1rem; 
  justify-content: center;
  align-items: center;
}

.timer-controls button {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
}

.timer-controls button:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-1px);
}

.timer-controls button:active:not(:disabled) {
  transform: translateY(0);
}

.timer-controls button.pip-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  padding: 0;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  color: white;
  transition: all 0.2s ease;
}

.timer-controls button.pip-button:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.05);
}

.timer-controls button.pip-button:active {
  transform: scale(0.95);
}
.timer-controls button { margin:0 0.5rem; }

.customize-backdrop { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center; z-index:10; }
.customize-modal { width:90%; max-width:900px; background:#0b0b0b; padding:1rem; border-radius:8px; color:#fff; }
.customize-header { display:flex; justify-content:space-between; align-items:center; }
.customize-body { display:grid; grid-template-columns:1fr; gap:1rem; margin-top:1rem; }
.wallpaper-grid { display:flex; gap:8px; flex-wrap:wrap; }
.wallpaper-item { width:120px; height:80px; overflow:hidden; border-radius:6px; cursor:pointer; border:2px solid transparent; }
.wallpaper-item.selected { border-color:#2dd4bf; }
.wallpaper-item img, .wallpaper-item video { width:100%; height:100%; object-fit:cover; }
.wallpaper-style { margin-top:0.5rem; }

.pomodoro-style-fill .pomodoro-bg-image, .pomodoro-style-fill .pomodoro-bg-video { object-fit:cover; }
.pomodoro-style-center .pomodoro-bg-image { object-fit:contain; background-position:center; background-repeat:no-repeat; }
.pomodoro-style-stretch .pomodoro-bg-image, .pomodoro-style-stretch .pomodoro-bg-video { object-fit:fill; }
.pomodoro-style-tile .pomodoro-bg-image { object-fit:cover; background-repeat:repeat; }

/* Background should fill the entire inner area */
.pomodoro-root .pomodoro-inner > .pomodoro-background { position:absolute; inset:0; z-index:1; overflow:hidden; }
.pomodoro-root .pomodoro-inner > .pomodoro-background .pomodoro-bg-image,
.pomodoro-root .pomodoro-inner > .pomodoro-background .pomodoro-bg-video { width:100%; height:100%; object-fit:cover; }

/* dark overlay for contrast */
.pomodoro-root .pomodoro-inner > .pomodoro-background::after { content: ''; position: absolute; inset:0; background: linear-gradient(rgba(0,0,0,0.25), rgba(0,0,0,0.25)); z-index:2; pointer-events:none; }

/* Ensure inner container spans the full content area (up to sidebar) in normal mode */
.pomodoro-root { width: 100%; }
.pomodoro-root .pomodoro-inner { margin-left: 0; margin-right: 0; }

/* Fullscreen styling: make the inner element cover the whole viewport */
.pomodoro-root .pomodoro-inner:fullscreen,
.pomodoro-root .pomodoro-inner:-webkit-full-screen {
	position: fixed !important;
	top: 0;
	left: 0;
	width: 100vw !important;
	height: 100vh !important;
	margin: 0 !important;
	padding: 0 !important;
	z-index: 99999;
	border-radius: 0 !important;
}
.pomodoro-root .pomodoro-inner:fullscreen .pomodoro-background video,
.pomodoro-root .pomodoro-inner:-webkit-full-screen .pomodoro-background video,
.pomodoro-root .pomodoro-inner:fullscreen .pomodoro-background img,
.pomodoro-root .pomodoro-inner:-webkit-full-screen .pomodoro-background img {
	width: 100vw !important;
	height: 100vh !important;
	object-fit: cover !important;
}

/* Header sits above background */
.pomodoro-root .pomodoro-inner .pomodoro-header { position:relative; z-index:3; }

/* Fullscreen button */
.fullscreen-btn { position:absolute; top:0.75rem; right:0.75rem; z-index:4; background:rgba(0,0,0,0.45); border:1px solid rgba(255,255,255,0.08); color:#fff; width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:6px; cursor:pointer; }
.fullscreen-btn:hover { background:rgba(0,0,0,0.6); }

/* Responsive clock */
.pomodoro-home .pomodoro-clock { 
  font-weight:600; 
  font-size: clamp(2.5rem, 9vw, var(--clock-font-size)); 
  line-height:1; 
}
.pomodoro-home .pomodoro-date { margin-top:0.75rem; font-size:clamp(1rem, 2.2vw, 1.5rem); }

/* Bottom-right control cluster (segmented toggle + actions) */
.control-cluster {
	position: absolute;
	right: 1rem;
	bottom: 1rem;
	z-index: 6;
	display: flex;
	align-items: center;
	gap: 0.5rem;
	background: transparent;
}

.segmented-toggle {
	display: inline-flex;
	border-radius: 999px;
	background: rgba(0,0,0,0.4);
	padding: 4px;
	backdrop-filter: blur(6px);
	border: 1px solid rgba(255,255,255,0.06);
}

.seg-item {
	padding: 8px 12px;
	color: #fff;
	background: transparent;
	border: none;
	cursor: pointer;
	border-radius: 999px;
	font-weight: 600;
	font-size: 0.95rem;
	transition: background 180ms ease, transform 160ms ease, color 120ms ease;
}

.seg-item:not(.active):hover {
	background: rgba(255,255,255,0.04);
	transform: translateY(-2px);
}

.seg-item.active {
	background: linear-gradient(135deg,#10b981,#06b6d4);
	color: #081019;
	box-shadow: 0 6px 18px rgba(16,185,129,0.12);
}

.control-btn {
	width: 40px;
	height: 40px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	border-radius: 10px;
	background: rgba(0,0,0,0.45);
	color: #fff;
	border: 1px solid rgba(255,255,255,0.06);
	cursor: pointer;
}

.control-btn:hover { background: rgba(0,0,0,0.6); transform: translateY(-2px); }

.control-btn.customize { font-size: 18px; }

/* Responsive adjustments */
@media (max-width: 640px) {
	.control-cluster { right: 0.6rem; bottom: 0.6rem; gap: 0.4rem; }
	.seg-item { padding: 6px 8px; font-size: 0.85rem; }
	.control-btn { width: 36px; height: 36px; border-radius: 8px; }
}

@media (max-width: 420px) {
	.segmented-toggle { display: none; }
	.control-cluster { gap: 0.35rem; }
}

/* Ensure controls are visible when pomodoro-inner is fullscreen */
.pomodoro-root .pomodoro-inner:fullscreen .control-cluster,
.pomodoro-root .pomodoro-inner:-webkit-full-screen .control-cluster {
	position: fixed !important;
	right: 1rem !important;
	bottom: 1rem !important;
	z-index: 100000 !important; /* sit above everything */
	pointer-events: auto !important;
}

.pomodoro-root .pomodoro-inner:fullscreen .segmented-toggle,
.pomodoro-root .pomodoro-inner:-webkit-full-screen .segmented-toggle {
	backdrop-filter: blur(8px);
}

@media (max-width: 640px) {
	.pomodoro-root .pomodoro-inner { margin: 0.75rem; min-height:42vh; border-radius:8px; }
	.fullscreen-btn { width:32px; height:32px; top:0.5rem; right:0.5rem; }
}

/* Timer animations */
@keyframes timerPulse {
  0% { transform: scale(1); opacity: 0.95; }
  50% { transform: scale(1.005); opacity: 1; }
  100% { transform: scale(1); opacity: 0.95; }
}

@keyframes ambientGlow {
  0% { 
    box-shadow: 0 8px 32px rgba(255, 255, 255, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.05);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 12px 40px rgba(255, 255, 255, 0.15), inset 0 0 30px rgba(255, 255, 255, 0.08);
    transform: scale(1.01);
  }
  100% { 
    box-shadow: 0 8px 32px rgba(255, 255, 255, 0.1), inset 0 0 20px rgba(255, 255, 255, 0.05);
    transform: scale(1);
  }
}

.timer-digit-change {
  animation: digitFlip 0.6s ease-in-out;
}

@keyframes digitFlip {
  0% { 
    transform: rotateX(0deg) scale(1); 
    opacity: 1;
  }
  25% { 
    transform: rotateX(-90deg) scale(1.1); 
    opacity: 0.8;
  }
  50% { 
    transform: rotateX(-180deg) scale(1.2); 
    opacity: 0.6;
  }
  75% { 
    transform: rotateX(-270deg) scale(1.1); 
    opacity: 0.8;
  }
  100% { 
    transform: rotateX(-360deg) scale(1); 
    opacity: 1;
  }
}

/* PiP Button Styling */
.pip-button {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
  margin-left: 8px;
}

.pip-button:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: scale(1.05);
}

.pip-button:active {
  transform: scale(0.95);
}

.pip-button.active {
  background: rgba(255, 255, 255, 0.3);
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
}
